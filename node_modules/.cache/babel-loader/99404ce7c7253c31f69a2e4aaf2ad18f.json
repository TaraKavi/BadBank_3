{"ast":null,"code":"var _jsxFileName = \"/Users/mint/Sites/BadBankS/src/pages/transactions.js\",\n  _s = $RefreshSig$();\nimport { useContext, useState } from \"react\";\nimport { UsersContext } from \"../state/AppState\";\nimport { useToastContext } from \"../state/CustomToast\";\nimport { BankCard } from \"../components/bankcard\";\nimport BankForm from \"../components/bankform\";\nimport * as yup from \"yup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Transactions = () => {\n  _s();\n  const {\n    usersState,\n    actions\n  } = useContext(UsersContext);\n  const [show, setShow] = useState(true);\n  const addToast = useToastContext();\n  const user = usersState.users.find(elem => elem.email === usersState.currentUser);\n  let formFields = [{\n    id: \"Amount\",\n    placeholder: \"Enter amount\",\n    type: \"input\"\n  }];\n  let initialValues = {\n    Amount: \"\"\n  };\n  const handleWithdrawSubmit = data => {\n    const {\n      result,\n      errorMessage\n    } = actions.withDraw(Number(data.Amount));\n    if (result) {\n      setShow(false);\n      addToast({\n        text: \"Successful withdrawal\",\n        type: \"success\"\n      });\n    } else {\n      addToast({\n        text: errorMessage,\n        type: \"error\"\n      });\n    }\n    return {\n      result,\n      errorMessage: \"\"\n    };\n  };\n  const handleDepositSubmit = data => {\n    const {\n      result,\n      errorMessage\n    } = actions.deposit(Number(data.Amount));\n    if (result) {\n      setShow(false);\n      addToast({\n        text: \"Successful deposit\",\n        type: \"success\"\n      });\n    } else {\n      addToast({\n        text: errorMessage,\n        type: \"error\"\n      });\n    }\n    return {\n      result,\n      errorMessage: \"\"\n    };\n  };\n  const schema = yup.object().shape({\n    Amount: yup.number().test(\"is-decimal\", \"Amount must be a currency\", value => value.toString().match(/^-?\\d+(\\.\\d{1,2})?$/g)).typeError(\"Amount must be a valid number\").min(0.01, \"Amount must be a positive number\").required()\n  });\n  const clearForm = () => {\n    setShow(true);\n  };\n  const renderNewOperation = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: \"Your balance has been updated\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          onClick: () => clearForm(),\n          children: \"New operation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this);\n  };\n  const renderWithDrawForm = () => {\n    return /*#__PURE__*/_jsxDEV(BankForm, {\n      buttonSubmit: \"Withdraw\",\n      handle: handleWithdrawSubmit,\n      fields: formFields,\n      initialData: initialValues,\n      schema: schema\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  };\n  const renderDepositForm = () => {\n    return /*#__PURE__*/_jsxDEV(BankForm, {\n      buttonSubmit: \"Deposit\",\n      handle: handleDepositSubmit,\n      fields: formFields,\n      initialData: initialValues,\n      schema: schema\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card-container withdraw\",\n    children: /*#__PURE__*/_jsxDEV(BankCard, {\n      txtcolor: \"black\",\n      header: \"Transactions\",\n      body: usersState.currentUser ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"col text-center mb-3\",\n          id: \"total\",\n          children: [\"Balance $\", user.balance]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }, this), show ? renderWithDrawForm() : renderNewOperation(), show ? renderDepositForm() : renderNewOperation()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"You must be logged in to use this function\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n};\n_s(Transactions, \"vaia0KRPiY3dHi6oz/S8gAUdy/Y=\", false, function () {\n  return [useToastContext];\n});\n_c = Transactions;\nvar _c;\n$RefreshReg$(_c, \"Transactions\");","map":{"version":3,"names":["useContext","useState","UsersContext","useToastContext","BankCard","BankForm","yup","Transactions","usersState","actions","show","setShow","addToast","user","users","find","elem","email","currentUser","formFields","id","placeholder","type","initialValues","Amount","handleWithdrawSubmit","data","result","errorMessage","withDraw","Number","text","handleDepositSubmit","deposit","schema","object","shape","number","test","value","toString","match","typeError","min","required","clearForm","renderNewOperation","renderWithDrawForm","renderDepositForm","balance"],"sources":["/Users/mint/Sites/BadBankS/src/pages/transactions.js"],"sourcesContent":["import { useContext, useState } from \"react\";\nimport { UsersContext } from \"../state/AppState\";\nimport { useToastContext } from \"../state/CustomToast\";\nimport { BankCard } from \"../components/bankcard\";\nimport BankForm from \"../components/bankform\";\nimport * as yup from \"yup\";\n\nexport const Transactions = () => {\n  const { usersState, actions } = useContext(UsersContext);\n  const [show, setShow] = useState(true);\n  const addToast = useToastContext();\n\n  const user = usersState.users.find(\n    (elem) => elem.email === usersState.currentUser\n  );\n\n  let formFields = [\n    { id: \"Amount\", placeholder: \"Enter amount\", type: \"input\" },\n  ];\n\n  let initialValues = {\n    Amount: \"\",\n  };\n\n\n  const handleWithdrawSubmit = (data) => {\n    const { result, errorMessage } = actions.withDraw(Number(data.Amount));\n\n    if (result) {\n      setShow(false);\n      addToast({ text: \"Successful withdrawal\", type: \"success\" });\n    } else {\n      addToast({ text: errorMessage, type: \"error\" });\n    }\n\n    return { result, errorMessage: \"\" };\n  };\n\n  const handleDepositSubmit = (data) => {\n    const { result, errorMessage } = actions.deposit(Number(data.Amount));\n\n    if (result) {\n      setShow(false);\n      addToast({ text: \"Successful deposit\", type: \"success\" });\n    } else {\n      addToast({ text: errorMessage, type: \"error\" });\n    }\n\n    return { result, errorMessage: \"\" };\n  };\n \n\n  const schema = yup.object().shape({\n    Amount: yup\n      .number()\n      .test(\"is-decimal\", \"Amount must be a currency\", (value) =>\n        value.toString().match(/^-?\\d+(\\.\\d{1,2})?$/g)\n      )\n      .typeError(\"Amount must be a valid number\")\n      .min(0.01, \"Amount must be a positive number\")\n      .required(),\n  });\n\n  const clearForm = () => {\n    setShow(true);\n  };\n\n  const renderNewOperation = () => {\n    return (\n      <div>\n        <div className=\"mb-3\">Your balance has been updated</div>\n        <div className=\"text-center\">\n          <button type=\"submit\" className=\"btn btn-primary\" onClick={() => clearForm()}>\n            New operation\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  const renderWithDrawForm = () => {\n    return (\n      <BankForm\n        buttonSubmit=\"Withdraw\"\n        handle={handleWithdrawSubmit}\n        fields={formFields}\n        initialData={initialValues}\n        schema={schema}\n      />\n    );\n  };\n  const renderDepositForm = () => {\n    return (\n      <BankForm\n        buttonSubmit=\"Deposit\"\n        handle={handleDepositSubmit}\n        fields={formFields}\n        initialData={initialValues}\n        schema={schema}\n      />\n    );\n  };\n\n  return (\n    <div className=\"card-container withdraw\">\n      <BankCard\n        txtcolor=\"black\"\n        header=\"Transactions\"\n        body={\n          usersState.currentUser ? (\n            <div>\n              <h3 className=\"col text-center mb-3\" id=\"total\">\n                Balance ${user.balance}\n              </h3>\n              {show ? renderWithDrawForm() : renderNewOperation()}\n              {show ? renderDepositForm() : renderNewOperation()}\n            </div>\n          ) : (\n            <div>You must be logged in to use this function</div>\n          )\n        }\n      />\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}